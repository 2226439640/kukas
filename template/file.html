<!DOCTYPE html>
<!-- saved from url=(0060)http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="author" content="order by dede58.com">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/img/logo.png">
    <title>测试用例管理系统</title>
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/mmss.css">
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">
     <script src="/static/js/jquery-1.11.3.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <style>

    </style>
</head>
<body>
<header>
    <div class="container-fluid navbar-fixed-top bg-primary">
        <ul class="nav navbar-nav  left">
            <li class="text-white h4">
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-leaf"></span>&nbsp;&nbsp;<b>测试用例管理系统</b>
            </li>
        </ul>
        <ul class="nav navbar-nav nav-pills right ">
            <li class="bg-info dropdown">
                <a class="dropdown-toggle" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-user"></span>&nbsp;<span>系统管理员</span><span class="caret"></span>
                </a>
                <ul class="dropdown-menu dropdown-menu-right">
                    <li class="text-center"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><span class="text-primary">账号设置</span></a></li>
                    <li class="text-center"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><span class="text-primary">消息设置</span></a></li>
                    <li class="text-center"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><span class="text-primary">帮助中心</span></a></li>
                    <li class="divider"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"></a></li>
                    <li class="text-center"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/login.html"><span class="text-primary">退出</span></a></li>
                </ul>
            </li>
        </ul>
    </div>
</header>

<section>
    <div class="container-fluid">
        <div class="row ">
            <!--左侧导航开始-->
            <div class="col-xs-2 bg-blue">
                <br>
                <div class="panel-group sidebar-menu" id="accordion" aria-multiselectable="true">
                    <div class="panel panel-default menu-first menu-first-active">
                        <a data-toggle="collapse" data-parent="#accordion" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/index.html" aria-expanded="true" aria-controls="collapseOne">
                            <i class="icon-home icon-large"></i> 主页
                        </a>
                    </div>
                    <div class="panel panel-default menu-first">
                        <a data-toggle="collapse" data-parent="#accordion" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <i class="icon-user-md icon-large"></i> 系统管理</a>
                        

                        <div id="collapseOne" class="panel-collapse collapse in">
                            <ul class="nav nav-list menu-second">
                                <li class="menu-second-selected"><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-user"></i> 表格p1</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p2.html"><i class="icon-edit"></i> 图表p2</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p3.html"><i class="icon-trash"></i> p3</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-list"></i> 子选项4</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="panel panel-default menu-first">
                        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            <i class="icon-book icon-large"></i> 文件管理</a>
                        
                        <div id="collapseTwo" class="panel-collapse collapse">
                            <ul class="nav nav-list menu-second">
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-user"></i> 文件</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="panel panel-default menu-first">
                        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            <i class="icon-book icon-large"></i> 其他管理</a>
                        

                        <div id="collapseThree" class="panel-collapse collapse">
                            <ul class="nav nav-list menu-second">
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-user"></i> 子选项1</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-edit"></i> 子选项2</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-trash"></i> 子选项3</a></li>
                                <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/p1.html#"><i class="icon-list"></i> 子选项4</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--左侧导航结束-->
            <!----------------------------------------------------------------------------------------------------->
            <!--右侧内容开始-->
            <div class="col-xs-10">
                <br>
                <ol class="breadcrumb">
                    <li><a href="http://demo.kangjingept.com:8020/cssthemes6/1.18ZF07/index.html"><span class="glyphicon glyphicon-home"></span>&nbsp;后台首页</a></li>
                    <li class="active">系统管理 - 表格</li>
                </ol>
                <div class="input-group line left">
                    <span class="input-group-addon" id="basic-addon2"><span class="glyphicon glyphicon-search"></span></span>
                    <input type="text" class="form-control" placeholder="输入文件名搜索" aria-describedby="basic-addon2" id="sefile">
                </div>
                <form method="post" enctype="multipart/form-data" action="/file/upload/">
                    <input id="lefile" type="file" class="input-group-addon line right" name="file">
                    <button type="submit" class="btn btn-primary line right">确定上传</button>
                </form>
                <a class=" btn btn-primary " onclick="getAjax6()"><span class="glyphicon glyphicon-search"></span></a>
                <br><br>
                <table class="table table-bordered table-striped text-center bg-info" id="filetable">
                    <thead>
                    <tr class="info">
                        <th class="text-center">序号</th>
                        <th class="text-center">文件名</th>
                        <th class="text-center">更新时间</th>
                        <th class="text-center">更新用户</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for file in casefiles %}
                    <tr>
                        {% for f in file %}
                        {% if forloop.counter == 3%}
                        <td>{{f|date:"Y-m-d H:i:s"}}</td>
                        {% else%}
                            <td>{{f}}</td>
                        {% endif %}
                        {% endfor %}
                        <td>
                            <a href="{% url 'delfileCase' %}?fileid={{ file.0 }}" class="btn btn-primary btn-sm">删除</a>
                            <a href="{% url 'downFile' %}?fileid={{ file.0 }}" class="btn btn-primary btn-sm">下载</a>
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <ul class="pagination right" id="myfi">
                    <li><a href="/file/fileall/{{ pageNow|add:-1 }}/" aria-label="Previous"><span aria-hidden="true">«</span></a>
                    </li>
                    {% for page in pageNums %}
                        {% if pageNow == page %}
                            <li class="active"><a href="/file/fileall/{{ page }}/">{{page}}<span class="sr-only">(current)</span></a></li>
                        {% else %}
                            <li><a href="/file/fileall/{{ page }}/">{{ page }}</a></li>
                        {% endif %}
                    {% endfor %}
                    <li><a href="/file/fileall/{{ pageNow|add:1 }}/" aria-label="Next"><span aria-hidden="true">»</span></a></li>
                </ul>
            </div>
            <!--右侧内容结束-->
        </div>
    </div>
</section>

<footer class="bg-primary navbar-fixed-bottom">
    <p class="text-center text-white">版权所有©lxp</p>
</footer>

<script src="static/js/jquery-1.11.3.js"></script>
<script src="static/js/bootstrap.js"></script>
<script>
String.prototype.format = function(args) {
  if (arguments.length > 0) {
    var result = this;
    if (arguments.length == 1 && typeof(args) == "object") {
      for (var key in args) {
        var reg = new RegExp("({" + key + "})", "g");
        result = result.replace(reg, args[key]);
      }
    } else {
      for (var i = 0; i < arguments.length; i++) {
        if (arguments[i] == undefined) {
          return "";
        } else {
          var reg = new RegExp("({[" + i + "]})", "g");
          result = result.replace(reg, arguments[i]);
        }
      }
    }
    return result;
  } else {
    return this;
  }
}

    function getAjax6(page=1) {
    if($("#sefile").val() == "")
    {
        alert("搜索条件为空！");
        window.location.reload();}
    $.ajax({
        url: '/file/searchfile/{0}/'.format(page),
        type: 'post',
        contentType: "application/json",
        data: JSON.stringify({
            "searchcase": $("#sefile").val(),
        }),
        success: function(data) {
            var table = document.getElementById("filetable");
            var table_length = table.rows.length
            for(var i=1;i<table_length;++i)
            {table.deleteRow(1);}
            file_data = data["result"]
            for(var i=0;i<file_data.length;++i){
                           table.insertRow(i+1)
                           for(var j=0;j<file_data[i].length;++j)
                           {
                               text = document.createTextNode(file_data[i][j]);
                               td = table.rows[i+1].insertCell(j)
                               td.appendChild(text)
                           }
                           td = table.rows[i+1].insertCell(file_data[i].length)
                           td.innerHTML = "<a href='/file/delfilecase/?fileid={0}' class='btn btn-primary btn-sm'>删除</a><a href='/file/downfile/?fileid={0}' class='btn btn-primary btn-sm'>下载</a>".format(file_data[i][0]);
                       }
            var myfi = document.getElementById('myfi');
            $("#myfi").html('');
            var li=document.createElement("li");
            li.innerHTML="<a aria-label='Previous' onclick='getAjax6({0})'><span aria-hidden='true'>«</span></a>".format(data["pageNow"]-1)
            myfi.appendChild(li)
            for(var i=1;i<=data["pageNums"];++i)
            {
                li=document.createElement("li");
                li.innerHTML = "<a onclick='getAjax6({0})'>{0}</a></li>".format(i)
                if(i == data["pageNow"])
                {
                    li.className = "active";
                }
                myfi.appendChild(li)
            }
            li=document.createElement("li");
            li.innerHTML="<a aria-label='Next' onclick='getAjax6({0})'><span aria-hidden='true'>»</span></a></li>".format(data["pageNow"]+1)
            myfi.appendChild(li)
        }
    });
return true;
};

</script><script src="/static/js/bootlint.js"></script>

</body></html>